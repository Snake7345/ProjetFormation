<p>Veuillez remplir le questionnaire suivant pour ajouter une formation</p>
<!--TODO: Questionnaire à faire
  !-->
<form [formGroup]="formationFormGroup" class="example-form" (ngSubmit)="onUpdate()" >
  <mat-form-field class="example-full-width">
    <mat-label>Nouvelle formation</mat-label>
    <input type="text" matInput formControlName="nom" />
    <mat-error *ngIf="formationFormGroup.controls['nom'].invalid">
      {{ getErrorMessageNom() }}
    </mat-error>
  </mat-form-field>
  <br/>
  <mat-form-field class="example-full-width">
    <mat-label>Info complémentaires</mat-label>
    <textarea matInput formControlName="infos"></textarea>
    <mat-error *ngIf="formationFormGroup.controls['infos'].invalid">
      {{ getErrorMessageInfos() }}
    </mat-error>
  </mat-form-field>
  <br/>
  <mat-form-field style="padding: 5px" class="example-full-width" appearance="fill">
    <mat-label>Date limite de l'inscription</mat-label>
    <input matInput formControlName="dateLimiteInscription" [matDatepicker]="picker2"/>
    <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
    <mat-datepicker #picker2></mat-datepicker>
    <mat-error *ngIf="formationFormGroup.controls['dateLimiteInscription'].invalid">
      {{ getErrorMessageDateLimiteInscription() }}
    </mat-error>
  </mat-form-field>
  <mat-form-field class="example-full-width">
    <mat-label>Heure limite de l'inscription</mat-label>
    <input matInput
           [ngxMatTimepicker]="picker"
           [format]="24"
           formControlName="heureLimiteInscription"
           readonly/>
    <mat-icon matSuffix
              (click)="picker.open()">
      watch_later
    </mat-icon>
    <!--<input type="time" step="60" matInput formControlName="heureLimiteInscription" readonly />-->
    <mat-error *ngIf="formationFormGroup.controls['heureLimiteInscription'].invalid">
      {{ getErrorMessageHeureLimiteInscription() }}
    </mat-error>
  </mat-form-field>
  <ngx-mat-timepicker #picker></ngx-mat-timepicker>
  <br/>
  <mat-form-field style="padding: 5px" class="example-full-width" appearance="fill">
    <mat-label>Date du questionnaire de l'examen</mat-label>
    <input matInput formControlName="dateQuestionnaire" [matDatepicker]="picker3"/>
    <mat-datepicker-toggle matIconSuffix [for]="picker3"></mat-datepicker-toggle>
    <mat-datepicker #picker3></mat-datepicker>
    <mat-error *ngIf="formationFormGroup.controls['dateQuestionnaire'].invalid">
      {{ getErrorMessageDateQuestionnaire() }}
    </mat-error>
  </mat-form-field>

  <mat-form-field class="example-full-width">
    <mat-label>Heure de questionnaire</mat-label>
    <input type="time" step="60" matInput formControlName="heureQuestionnaire" readonly />
    <mat-error *ngIf="formationFormGroup.controls['heureQuestionnaire'].invalid">
      {{ getErrorMessageHeureQuestionnaire() }}
    </mat-error>
  </mat-form-field>

  <br/>
  <mat-form-field appearance="fill">
    <mat-label>Choissiez la catégorie</mat-label>
    <mat-select formControlName="categorie" (ngModelChange)="afficherCategorie()" [(value)]="selectedCat">
      <mat-option *ngFor="let categorie of categories" [value]="categorie.idCategories">
        {{categorie.nom}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="formationFormGroup.controls['categorie'].invalid">
      {{ getErrorMessageCategorie() }}
    </mat-error>
  </mat-form-field>
  <br/>
  <mat-form-field appearance="fill">
    <mat-label>Choissiez le responsable</mat-label>
    <mat-select formControlName="utilisateur" (ngModelChange)="afficherUtilisateur()" [(value)]="selectedUser">
      <mat-option *ngFor="let utilisateur of utilisateurs" [value]="utilisateur.idUtilisateur">
        {{utilisateur.nom + " " + utilisateur.prenom}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="formationFormGroup.controls['utilisateur'].invalid">
      {{ getErrorMessageUtilisateur() }}
    </mat-error>
  </mat-form-field>
  <br/>
  <button style="margin-right: 10px" class="btn btn-outline-primary btn-block" (click)="retour()">
    <i class="fas fa-arrow-alt-circle-left"></i>Retour</button>
  <button type="submit" class="btn btn-outline-success btn-block" (click)="updateData()" [disabled]="!formationFormGroup.valid ">
    <i class="far fa-plus-square"></i>Modifier</button>
</form>
